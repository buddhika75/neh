<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">

    <body>

        <ui:composition template="./../template.xhtml">
            <h:outputStylesheet library="css" name="main.css" ></h:outputStylesheet>
            <ui:define name="body">
                <h:form >
                    <h:panelGrid columns="4">
                        <p:commandButton  icon="ui-icon-disk" ajax="false" value="Register" action="#{opdVisitController.opdVisitRegister()}" >
                        </p:commandButton>
                        <p:commandButton icon="ui-icon-document" ajax="false" value="Add New Record" action="#{opdVisitController.recreateForm()}" ></p:commandButton>
                        <p:commandButton value="Print" type="button" icon="ui-icon-print">
                            <p:printer target="opdVisitPrint" />
                        </p:commandButton>
                        <p:commandButton icon="ui-icon-refresh" ajax="false" value="Clear" action="#{opdVisitController.clear()}" ></p:commandButton>

                    </h:panelGrid>

                    <p:panel id="opdVisit">
                        <table border="2" style="padding: 3px; margin: 10px; width: 90%;" >
                            <tr>
                                <td colspan="2" rowspan="2" style="text-align: center; vertical-align: middle;">
                                    <h:selectOneMenu id="cmbUnit" value="#{opdVisitController.selected.unit}" rendered="true" style="font-size: 30px;" >
                                        <f:selectItems value="#{unitController.itemsAvailableSelectOne}" var="unit"
                                                       itemLabel="#{unit.code}" itemValue="#{unit}" ></f:selectItems>
                                        <f:ajax execute="cmbUnit" render="txtDailyNo" listener="#{opdVisitController.updateDailyNo()}" ></f:ajax>
                                    </h:selectOneMenu>
                                    <h:outputLabel value="#{opdVisitController.selected.unit.code}" style="font-size: 30px; font-weight: bold;" ></h:outputLabel>
                                </td>
                                <td colspan="4" rowspan="4" style="text-align: center;vertical-align: middle;" >
                                    <h:graphicImage value="/resources/eyeLogo.jpg" width="150px" height="100px"></h:graphicImage>
                                    <br/>
                                    <h:outputLabel value="ශ්‍රි ලංකා ජාතික අක්ෂි රෝහල"  style="font-size: 18px;"></h:outputLabel>
                                    <br/>
                                    <h:outputLabel value="බාහිර රෝගී අංශය"  style="font-size: 18px;"></h:outputLabel>
                                    <br/>
                                    <h:outputLabel value="இலங்கை தேசிய கண் வைத்தியசாலை" style="font-size: 11px;"></h:outputLabel>
                                    <br/>
                                    <h:outputLabel value="அவுட் நோயாளி பிரிவு"></h:outputLabel>
                                    <br/>
                                    <h:outputLabel value="National Eye Hospital, Sri Lanka" style="font-size: 18px;"></h:outputLabel>
                                    <br/>
                                    <h:outputLabel value="Out Patient Department" style="font-size: 22px;"></h:outputLabel>
                                </td>
                                <td colspan="2" >
                                    <table >
                                        <tr>
                                            <td>
                                                <h:outputLabel value="Date" styleClass="threeHunderedWidthInput" ></h:outputLabel>
                                            </td>
                                            <td>
                                                <p:calendar value="#{opdVisitController.selected.encounterDate}" pattern="dd MMMM yyyy" ></p:calendar>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2" >
                                    <table >
                                        <tr>
                                            <td>Daily No</td>
                                            <td>
                                                <p:inputText id="txtDailyNo" value="#{opdVisitController.selected.dailyNo}" ></p:inputText>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2" rowspan="2">
                                    <table >
                                        <tr>
                                            <td>Serial No</td>
                                            <td>
                                                <p:inputText value="#{opdVisitController.selected.serialNo}" ></p:inputText>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                                <td colspan="2" >
                                    <table >
                                        <tr>
                                            <td>Age</td>
                                            <td>
                                                <p:inputText value="#{opdVisitController.selected.patient.age}" ></p:inputText>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2" >
                                    <table >
                                        <tr>
                                            <td>Sex</td>
                                            <td>
                                                <p:selectOneMenu value="#{opdVisitController.selected.patient.sex}" >
                                                    <f:selectItems value="#{commonController.sexs}" ></f:selectItems>
                                                </p:selectOneMenu>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="8">
                                    Name
                                    <p:inputText value="#{opdVisitController.selected.patient.name}" maxlength="254" ></p:inputText>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="6">
                                    Address
                                    <p:inputTextarea value="#{opdVisitController.selected.patient.address}" ></p:inputTextarea>
                                </td>
                                <td colspan="2" >
                                    Telephone
                                    <p:inputTextarea value="#{opdVisitController.selected.patient.telephoneNo}" ></p:inputTextarea>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="6">
                                    Occupation
                                    <p:autoComplete value="#{opdVisitController.selected.patient.occupation}" converter="itemConverter" 
                                                    completeMethod="#{itemController.completeOccupations}"
                                                    var="occ" itemLabel="#{occ.name}" itemValue="#{occ}" forceSelection="true">
                                    </p:autoComplete>
                                </td>
                                <td colspan="2" >
                                    <table >
                                        <tr>
                                            <td colspan="2" style="font-size: 14px;">
                                                VA - Non Aids
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                R/ Eye
                                                <p:inputText value="#{opdVisitController.selected.nonAidREye }"></p:inputText>
                                                <br/>
                                                L/ Eye
                                                <p:inputText value="#{opdVisitController.selected.nonAidLEye}"></p:inputText>
                                            </td>

                                        </tr>

                                    </table>

                                </td>



                            </tr>
                            <tr>
                                <td colspan="3">
                                    <h:outputLabel value="Presenting Complaint" ></h:outputLabel>
                                    <h:inputTextarea value="#{opdVisitController.selected.presentingComplaint}" ></h:inputTextarea>

                                </td>
                                <td colspan="3">
                                    <h:outputLabel value="Diagnosis" ></h:outputLabel>
                                    <h:inputTextarea value="#{opdVisitController.selected.diagnosis}" ></h:inputTextarea>

                                </td>
                                <td colspan="2" >
                                    <table >
                                        <tr>
                                            <td colspan="2" style="font-size: 14px;" >
                                                VA - C Glass
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                R/ Eye
                                                <p:inputText value="#{opdVisitController.selected.cglassREye}"></p:inputText>
                                                <br/>
                                                L/ Eye
                                                <p:inputText value="#{opdVisitController.selected.cglassLEye}"></p:inputText>
                                            </td>
                                        </tr>
                                    </table>
                                </td>



                            </tr>
                            <tr colspan="8">


                                <td  colspan="3" style="font-size: 16px;" align="center ">Past Medical Hx


                                    <table  align="center">
                                        <tr>
                                            <td colspan="2">DM</td>
                                            <td> <p:selectBooleanCheckbox  value="#{opdVisitController.selected.dm }">  </p:selectBooleanCheckbox></td>
                                            <td colspan="2">HPT</td>
                                            <td> <p:selectBooleanCheckbox  value="#{opdVisitController.selected.hpt}">  </p:selectBooleanCheckbox>  </td>
                                        </tr>

                                        <tr>


                                        </tr>
                                        <tr>
                                            <td colspan="2">IHD</td>
                                            <td><p:selectBooleanCheckbox  value="#{opdVisitController.selected.ihd}">  </p:selectBooleanCheckbox></td>
                                            <td colspan="2">BA</td>
                                            <td><p:selectBooleanCheckbox  value="#{opdVisitController.selected.ba}">  </p:selectBooleanCheckbox></td>

                                        </tr>
                                        <tr>

                                        </tr>
                                        <tr>
                                            <td colspan="2">Allery</td>
                                            <td>  <p:selectBooleanCheckbox  value="#{opdVisitController.selected.allergy}">  </p:selectBooleanCheckbox></td>
                                        </tr>

                                        <tr><td colspan="2">Other</td><td> <p:inputTextarea value="#{opdVisitController.selected.pstmediOther}" maxlength="500" ></p:inputTextarea></td></tr>
                                    </table>



                                </td>

                                <td  colspan="2" style="font-size: 16px;" align="center ">Ocular Hx 
                                    <table align="canter">
                                        <tr>
                                            <td colspan="2">Trauma </td>
                                            <td align="canter "><p:selectBooleanCheckbox  value="#{opdVisitController.selected.trauma}">  </p:selectBooleanCheckbox></td>

                                        </tr>
                                        <tr>
                                            <td colspan="2">Glaucoma </td>
                                            <td> <p:selectBooleanCheckbox  value="#{opdVisitController.selected.glaucoma}">  </p:selectBooleanCheckbox>  </td>
                                        </tr>

                                        <tr>
                                            <td colspan="2">Laser Rx </td>
                                            <td><p:selectBooleanCheckbox  value="#{opdVisitController.selected.laserRx}">  </p:selectBooleanCheckbox></td>
                                        </tr>
                                        <tr>

                                            <td colspan="2">Avastin Inj</td>
                                            <td><p:selectBooleanCheckbox  value="#{opdVisitController.selected.avastinIng}">  </p:selectBooleanCheckbox></td>
                                        </tr>
                                        <tr>
                                            <td colspan="2">PST </td>
                                            <td>  <p:selectBooleanCheckbox  value="#{opdVisitController.selected.pst}">  </p:selectBooleanCheckbox></td>
                                        </tr>

                                        <tr><td colspan="2">Other</td><td> <p:inputTextarea value="#{opdVisitController.selected.ocularHxOther}" maxlength="500" ></p:inputTextarea></td></tr>



                                    </table>




                                </td>
                                <td  colspan="2" style="font-size: 16px;" align="center ">Surgical Hx

                                    <table align="canter">
                                        <tr>
                                            <td colspan="2">Cataract Sx </td>
                                            <td align="canter "><p:selectBooleanCheckbox  value="#{opdVisitController.selected.cataractSx}">  </p:selectBooleanCheckbox></td>

                                        </tr>

                                        <tr>
                                            <td colspan="2">Trab</td> 
                                            <td> <p:selectBooleanCheckbox  value="#{opdVisitController.selected.trab}">  </p:selectBooleanCheckbox>  </td>

                                        </tr>
                                        <tr>
                                            <td colspan="2">Tppv</td>
                                            <td> <p:selectBooleanCheckbox  value="#{opdVisitController.selected.tppv}">  </p:selectBooleanCheckbox></td>

                                        </tr>
                                        <tr>
                                            <td colspan="2">PKP/DLK</td>
                                            <td><p:selectBooleanCheckbox  value="#{opdVisitController.selected.pkp}">  </p:selectBooleanCheckbox></td>
                                        </tr>
                                        <tr>
                                            <td colspan="2">Squint</td>
                                            <td>  <p:selectBooleanCheckbox  value="#{opdVisitController.selected.squint}">  </p:selectBooleanCheckbox></td>
                                        </tr>

                                        <tr><td colspan="2">Other</td><td> <p:inputTextarea value="#{opdVisitController.selected.sugicalHxOther}" maxlength="500" ></p:inputTextarea></td></tr>
                                    </table>


                                </td>
                            </tr>
                        </table>

                    </p:panel>
                    <p:panel id="opdVisitPrint">
                        <table border="2" style="padding: 3px; margin: 10px; width: 90%;" >
                            <tr>
                                <td colspan="2" rowspan="2" style="text-align: center; vertical-align: middle;">
                                    
                                    <h:outputLabel value="#{opdVisitController.selected.unit.code}" style="font-size: 30px; font-weight: bold;" ></h:outputLabel>
                                </td>
                                <td colspan="4" rowspan="4" style="text-align: center;vertical-align: middle;" >
                                    <h:graphicImage value="/resources/eyeLogo.jpg" width="150px" height="100px"></h:graphicImage>
                                    <br/>
                                    <h:outputLabel value="ශ්‍රි ලංකා ජාතික අක්ෂි රෝහල"  style="font-size: 18px;"></h:outputLabel>
                                    <br/>
                                    <h:outputLabel value="බාහිර රෝගී අංශය"  style="font-size: 18px;"></h:outputLabel>
                                    <br/>
                                    <h:outputLabel value="இலங்கை தேசிய கண் வைத்தியசாலை" style="font-size: 11px;"></h:outputLabel>
                                    <br/>
                                    <h:outputLabel value="அவுட் நோயாளி பிரிவு"></h:outputLabel>
                                    <br/>
                                    <h:outputLabel value="National Eye Hospital, Sri Lanka" style="font-size: 18px;"></h:outputLabel>
                                    <br/>
                                    <h:outputLabel value="Out Patient Department print" style="font-size: 22px;"></h:outputLabel>
                                </td>
                                <td colspan="2" >
                                    <table >
                                        <tr>
                                            <td>
                                                <h:outputLabel value="Date" styleClass="threeHunderedWidthInput" ></h:outputLabel>
                                            </td>
                                            <td>
                                                <p:outputLabel value="#{opdVisitController.selected.encounterDate}"></p:outputLabel>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2" >
                                    <table >
                                        <tr>
                                            <td>Daily No</td>
                                            <td>
                                                <p:outputLabel id="txtDailyNop" value="#{opdVisitController.selected.dailyNo}" ></p:outputLabel>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2" rowspan="2">
                                    <table >
                                        <tr>
                                            <td>Serial No</td>
                                            <td>
                                                <p:outputLabel value="#{opdVisitController.selected.serialNo}" ></p:outputLabel>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                                <td colspan="2" >
                                    <table >
                                        <tr>
                                            <td>Age</td>
                                            <td>
                                                <p:outputLabel value="#{opdVisitController.selected.patient.age}" ></p:outputLabel>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2" >
                                    <table >
                                        <tr>
                                            <td>Sex</td>
                                            <td>
                                                <p:outputLabel value="#{opdVisitController.selected.patient.sex}" ></p:outputLabel>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="8">
                                    Name
                                    <p:outputLabel value="#{opdVisitController.selected.patient.name}" ></p:outputLabel>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="6">
                                    Address
                                    <p:outputLabel value="#{opdVisitController.selected.patient.address}" ></p:outputLabel>
                                </td>
                                <td colspan="2" >
                                    Telephone
                                    <p:outputLabel value="#{opdVisitController.selected.patient.telephoneNo}" ></p:outputLabel>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="6">
                                    Occupation
                                    <p:autoComplete value="#{opdVisitController.selected.patient.occupation}" converter="itemConverter" 
                                                    completeMethod="#{itemController.completeOccupations}"
                                                    var="occ" itemLabel="#{occ.name}" itemValue="#{occ}" forceSelection="true">
                                    </p:autoComplete>
                                </td>
                                <td colspan="2" >
                                    <table >
                                        <tr>
                                            <td colspan="2" style="font-size: 14px;">
                                                VA - Non Aids
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                R/ Eye
                                                <p:inputText value="#{opdVisitController.selected.nonAidREye }"></p:inputText>
                                                <br/>
                                                L/ Eye
                                                <p:inputText value="#{opdVisitController.selected.nonAidLEye}"></p:inputText>
                                            </td>

                                        </tr>

                                    </table>

                                </td>



                            </tr>
                            <tr>
                                <td colspan="3">
                                    <h:outputLabel value="Presenting Complaint" ></h:outputLabel>
                                    <h:inputTextarea value="#{opdVisitController.selected.presentingComplaint}" ></h:inputTextarea>

                                </td>
                                <td colspan="3">
                                    <h:outputLabel value="Diagnosis" ></h:outputLabel>
                                    <h:inputTextarea value="#{opdVisitController.selected.diagnosis}" ></h:inputTextarea>

                                </td>
                                <td colspan="2" >
                                    <table >
                                        <tr>
                                            <td colspan="2" style="font-size: 14px;" >
                                                VA - C Glass
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                R/ Eye
                                                <p:inputText value="#{opdVisitController.selected.cglassREye}"></p:inputText>
                                                <br/>
                                                L/ Eye
                                                <p:inputText value="#{opdVisitController.selected.cglassLEye}"></p:inputText>
                                            </td>
                                        </tr>
                                    </table>
                                </td>



                            </tr>
                            <tr colspan="8">


                                <td  colspan="3" style="font-size: 16px;" align="center ">Past Medical Hx


                                    <table  align="center">
                                        <tr>
                                            <td colspan="2">DM</td>
                                            <td> <p:selectBooleanCheckbox  value="#{opdVisitController.selected.dm }">  </p:selectBooleanCheckbox></td>
                                            <td colspan="2">HPT</td>
                                            <td> <p:selectBooleanCheckbox  value="#{opdVisitController.selected.hpt}">  </p:selectBooleanCheckbox>  </td>
                                        </tr>

                                        <tr>


                                        </tr>
                                        <tr>
                                            <td colspan="2">IHD</td>
                                            <td><p:selectBooleanCheckbox  value="#{opdVisitController.selected.ihd}">  </p:selectBooleanCheckbox></td>
                                            <td colspan="2">BA</td>
                                            <td><p:selectBooleanCheckbox  value="#{opdVisitController.selected.ba}">  </p:selectBooleanCheckbox></td>

                                        </tr>
                                        <tr>

                                        </tr>
                                        <tr>
                                            <td colspan="2">Allery</td>
                                            <td>  <p:selectBooleanCheckbox  value="#{opdVisitController.selected.allergy}">  </p:selectBooleanCheckbox></td>
                                        </tr>

                                        <tr><td colspan="2">Other</td><td> <p:inputTextarea value="#{opdVisitController.selected.pstmediOther}" maxlength="500" ></p:inputTextarea></td></tr>
                                    </table>



                                </td>

                                <td  colspan="2" style="font-size: 16px;" align="center ">Ocular Hx 
                                    <table align="canter">
                                        <tr>
                                            <td colspan="2">Trauma </td>
                                            <td align="canter "><p:selectBooleanCheckbox  value="#{opdVisitController.selected.trauma}">  </p:selectBooleanCheckbox></td>

                                        </tr>
                                        <tr>
                                            <td colspan="2">Glaucoma </td>
                                            <td> <p:selectBooleanCheckbox  value="#{opdVisitController.selected.glaucoma}">  </p:selectBooleanCheckbox>  </td>
                                        </tr>

                                        <tr>
                                            <td colspan="2">Laser Rx </td>
                                            <td><p:selectBooleanCheckbox  value="#{opdVisitController.selected.laserRx}">  </p:selectBooleanCheckbox></td>
                                        </tr>
                                        <tr>

                                            <td colspan="2">Avastin Inj</td>
                                            <td><p:selectBooleanCheckbox  value="#{opdVisitController.selected.avastinIng}">  </p:selectBooleanCheckbox></td>
                                        </tr>
                                        <tr>
                                            <td colspan="2">PST </td>
                                            <td>  <p:selectBooleanCheckbox  value="#{opdVisitController.selected.pst}">  </p:selectBooleanCheckbox></td>
                                        </tr>

                                        <tr><td colspan="2">Other</td><td> <p:inputTextarea value="#{opdVisitController.selected.ocularHxOther}" maxlength="500" ></p:inputTextarea></td></tr>



                                    </table>




                                </td>
                                <td  colspan="2" style="font-size: 16px;" align="center ">Surgical Hx

                                    <table align="canter">
                                        <tr>
                                            <td colspan="2">Cataract Sx </td>
                                            <td align="canter "><p:selectBooleanCheckbox  value="#{opdVisitController.selected.cataractSx}">  </p:selectBooleanCheckbox></td>

                                        </tr>

                                        <tr>
                                            <td colspan="2">Trab</td> 
                                            <td> <p:selectBooleanCheckbox  value="#{opdVisitController.selected.trab}">  </p:selectBooleanCheckbox>  </td>

                                        </tr>
                                        <tr>
                                            <td colspan="2">Tppv</td>
                                            <td> <p:selectBooleanCheckbox  value="#{opdVisitController.selected.tppv}">  </p:selectBooleanCheckbox></td>

                                        </tr>
                                        <tr>
                                            <td colspan="2">PKP/DLK</td>
                                            <td><p:selectBooleanCheckbox  value="#{opdVisitController.selected.pkp}">  </p:selectBooleanCheckbox></td>
                                        </tr>
                                        <tr>
                                            <td colspan="2">Squint</td>
                                            <td>  <p:selectBooleanCheckbox  value="#{opdVisitController.selected.squint}">  </p:selectBooleanCheckbox></td>
                                        </tr>

                                        <tr><td colspan="2">Other</td><td> <p:inputTextarea value="#{opdVisitController.selected.sugicalHxOther}" maxlength="500" ></p:inputTextarea></td></tr>
                                    </table>


                                </td>
                            </tr>
                        </table>
                    </p:panel>
                </h:form>
            </ui:define>

        </ui:composition>

    </body>
</html>
